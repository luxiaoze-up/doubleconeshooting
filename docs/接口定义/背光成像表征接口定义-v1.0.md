# 背光成像表征接口定义

Source: `D:\00.My_workspace\DoubleConeShooting\docs\接口定义\背光成像表征接口定义-v1.0.xlsx`

## Sheet: 01.Property

| 0                                                    | 1          | 2                             | 3                 | 4                                                             | 5                                                                                                                                                                                                                                                                                                                                                                                                                  | 6                                                                                                                                                                                                                                                                                                                |
|------------------------------------------------------|------------|-------------------------------|-------------------|---------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 服务名称：backlight_imaging_server/backlight（真空系统/背光成像表征） |            |                               |                   |                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                  |
| 序号                                                   | 接口名称       | 设计名称                          | 数据类型              | 默认值                                                           | 接口说明                                                                                                                                                                                                                                                                                                                                                                                                               | 备注                                                                                                                                                                                                                                                                                                               |
| 1                                                    | 束组编码       | bundleNo                      | String            |                                                               | 束组编码对照《重大装置光学工程设计规范手册》（GYB 63-2019）                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                  |
| 2                                                    | 子束编码       | laserNo                       | String            |                                                               | 子束编码对应《重大装置光学工程设计规范手册》（GYB 63-2019）中的子束代码Z1～Z4、Y1～Y4，如果不属于子束则省略子束编码（即仅为束组编码）                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                                  |
| 3                                                    | 系统/分系统编码   | systemNo                      | String            |                                                               | 系统软件编码[分系统软件编码]，编码参见《重大装置电气工程设计规范手册》（GYB 65A-2020）的表1                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                  |
| 4                                                    | 关联设备名      | subDevList                    | String            |                                                               | Json类型，需要访问的其他服务名列表，如["MCLA_A01Y3/Moter/01","MCLA_A01Z2/Moter/02"]                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                  |
| 5                                                    | 支持型号列表     | modelList                     | Array of String   |                                                               | 设备型号列表                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                  |
| 6                                                    | 当前型号       | currentModel                  | String            |                                                               | 配置错误则state显示UNKNOWN，status显示"error，model supported: xxx"                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                                                                                                  |
| 7                                                    | 设备连接信息     | connectString                 | String            |                                                               | 连接硬件设备所需的信息（信息内容根据硬件设备型号确定）
JSON对象格式字符串，例如{“ip”:”127.0.0.1”,”port”:"4001”}                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                  |
| 8                                                    | 错误编码信息     | errorDict                     | String            |                                                               | JSON对象格式字符串，例如：
{
"-1":"xxx error",
"3000":"xxx error"
}                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                                                                                                  |
| 9                                                    | 设备名称       | deviceName                    | String            |                                                               | 靶调节与真空分系统背光成像表征组件                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                  |
| 10                                                   | 设备编号       | deviceID                      | String            | DB01                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                  |
| 11                                                   | 设备安装位置描述   | devicePosition                | String            | Shanghai                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                  |
| 12                                                   | 设备出厂日期     | deviceProductDate             | String            | “2026/02/28”                                                  | yyyy-mm-dd                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                  |
| 13                                                   | 设备上线日期     | deviceInstallDate             | String            | “2025/12/31”                                                  | yyyy-mm-dd                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                  |
| 14                                                   | 设备连接信息     | connectString                 | String            |                                                               | JSON对象格式字符串：
{
  "LongStroke": {
    "MotorControllerIP": "192.168.xx.xx",
    "ConnectionNumber": "xxx",
    "AxisNumber": "x"
  },
  "SixDOF": {
    "MotorControllerIP": "192.168.xx.xx",
    "ConnectionNumber": "xxx",
    "XAxisNumber": "x",
    "YAxisNumber": "x"
   .....
  },
  "OneDPlatform": {
    "MotorControllerIP": "192.168.xx.xx",
    "ConnectionNumber": "xxx",
    "AxisNumber": "x",
  }
} | { "大行程"：{"电机控制器ip"："192.168.xx.xx" ，"连接号"："xxx"， "轴号"："x"}                                                                                          "六自由度"：{"电机控制器ip"："192.168.xx.xx" ，"连接号"："xxx"， "X轴轴号"："x"，"Y轴轴号"："x"......}
"一维平台"：{"电机控制器ip"："192.168.xx.xx" ，"连接号"："xxx"， "轴号"："x"}
}                     |
| 15                                                   | 大行程行程      | moveRange                     | DevShort          |                                                               | 大行程运动范围                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                  |
| 16                                                   | 大行程限位开关数量  | limitNumber                   | DevShort          |                                                               | 大行程限位开关数量                                                                                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                                                                                                                                                                  |
| 17                                                   | 六自由度行程     | moveRangeSix                  | Array of DevShort |                                                               | 六自由度各轴运动范围                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                  |
| 18                                                   | 六自由度限位开关数量 | limitNumberSix                | DevShort          |                                                               | 每个支链限位开关数量                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                  |
| 19                                                   | 一维平台行程     | oneItinerary                  | DevShort          |                                                               | 一维平台运动范围                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                                                                                                  |
| 20                                                   | 一维平台限位开关数量 | oneItineraryLimit             | DevShort          |                                                               | 一维平台限位开关数量                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                  |
| 21                                                   | 六自由度配置     | sdofConfig                    | String            |                                                               | JSON格式字符串：
{
  "r1": "X",
  "r2": "X",
  "hh": "X",
  "a1": "X"
  "a2": "X",
  "ll": "X",
  "h3": "X",
  "xm": "X",
  "AELimitX", "X",
 "AELimitY", "Y",
 "AELimitZ", "Z",
  "ARLimitTheta", "0",
  "ARLimiBeta", "0",
  "ARLimitGarma", "0",
  "workspaces": "X"
}                                                                                                                                                | r1;上平台半径单位mm
r2;下平台半径
hh;上下平台铰点面间距离
a1;上平台第一点与X轴夹角,单位度
a2;下平台第一点与X轴夹角
ll;支链初始长度
h3;铰点到上平台下表面垂直高度
h;动坐标点与上平台下表面的垂直距离
xm;铰点到平台半径水平距离
AELimitX;X轴向伸缩限制(mm 绝对值)
AELimitY;Y轴向伸缩限制(mm 绝对值)
AELimitZ;Z轴向伸缩限制(mm 绝对值)
ARLimitTheta;转角限制(分 绝对值)
ARLimitBelta;转角限制(分 绝对值)
ARLimitGarma;转角限制(分 绝对值)
workspaces;工作空间(mm 绝对值) |
| 22                                                   | 运动控制器服务名   | motionControllerName          | String            | sys/motion/1                                                  | 雷赛 型号：SMC608-BAS                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                  |
| 23                                                   | 运动控制器连接信息  | MotionControllerConnectString | String            | {"Name":"MotionController1",“ip”:”192.168.1.11”,”axisId”:"0”} | 连接硬件设备所需的信息
JSON对象格式字符串，例如{“ip”:”127.0.0.1”,”port”:"4001”}                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                  |
| 24                                                   | 绝对编码器服务名   | encoderName                   | String            | sys/encoder/1                                                 | 哈尔滨明快机电 型号：AELAN10                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                  |
| 25                                                   | 绝对编码器连接信息  | EncoderConnectString          | String            | {"Name":"Encoder",“ip”:”192.168.1.20”,”port”:"20200”}         | 连接硬件设备所需的信息
JSON对象格式字符串，例如{“ip”:”127.0.0.1”,”port”:"4001”}                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                  |

## Sheet: 02.Attribute

| 0                                                    | 1             | 2                   | 3           | 4             | 5       | 6                                                                                                                                                                                                                                                                                                        | 7                       | 8                                                                                                                                                                                   |
|------------------------------------------------------|---------------|---------------------|-------------|---------------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 服务名称：backlight_imaging_server/backlight（真空系统/背光成像表征） |               |                     |             |               |         |                                                                                                                                                                                                                                                                                                          |                         |                                                                                                                                                                                     |
| 序号                                                   | 接口名称          | 设计名称                | Attribute类型 | 数据类型          | 读写（R/W） | 接口说明                                                                                                                                                                                                                                                                                                     | 数据策略                    | 备注                                                                                                                                                                                  |
| 1                                                    | 设备状态          | State               | Scalar      | DevState      | R       | 设备状态：程序启动时初始状态INIT、连接状态ON、断开状态OFF、上电状态OPEN、运动状态RUNNING、下电状态CLOSE、未知状态UNKOWN、故障状态FAULT、正常待命STANDBY、报警ALARM、失能状态DISABLE                                                                                                                                                                                    |                         |                                                                                                                                                                                     |
| 2                                                    | 设备状态          | Status              | Scalar      | DevString     | R       | 设备状态描述:程序启动时初始状态、正常连接状态、断开状态、上电状态、运动状态、下电状态、未知状态、故障状态、正常待命状态、报警、失能状态                                                                                                                                                                                                                                     |                         |                                                                                                                                                                                     |
| 3                                                    | 自检结果          | selfCheckResult     | Scalar      | DevLong       | R       | 小于0代表未启动过自检，0代表自检正常，大于0代表自检异常,其中1代表电机自检异常，2代表相机自检异常，3代表光源自检异常，4代表其他异常                                                                                                                                                                                                                                    |                         |                                                                                                                                                                                     |
| 4                                                    | 位置单位          | positionUnit        | Scalar      | DevString     | RW      | 运动距离的单位，取值范围为step、mm、um、rad、urad、mrad其一，默认为step                                                                                                                                                                                                                                                          |                         |                                                                                                                                                                                     |
| 5                                                    | 组合属性          | groupAttributeJson  | Scalar      | DevString     | R       | 设备attribute的名和值的集合，JSON对象。
所有设备服务均提供该接口，用于一次获取多个attribute的值（主要考虑聚合Scalar类型Attribute，特别是常用的、关键的attribute）
{
  MotorPos: value[4],motorstate:value[4]
  lightluminance: value[4],lightstate：value[4]   ......
}                                                                                            |                         |                                                                                                                                                                                     |
| 6                                                    | 日志            | backlightLogs       | Scalar      | DevString     | R       | JSON对象格式字符串：
{ "time"："event"....}                                                                                                                                                                                                                                                                       | 有新指令时、指令完成时、报警时、出错时都记录， |                                                                                                                                                                                     |
| 8                                                    | 出错状态          | faultState          | Scalar      | DevString     | R       | DataTime：时间戳，Description：描述，Origin：源头，Reason：原因，Severity：等级                                                                                                                                                                                                                                              | 出现异常时刷新                 |                                                                                                                                                                                     |
| 9                                                    | 大行程绝对编码器位置    | largeRangePos       | Scalar      | DevDouble     | R       | 绝对式编码器采集卡反馈的大行程电机位置数值                                                                                                                                                                                                                                                                                    | 定时检测，每隔30ms检测一次         |                                                                                                                                                                                     |
| 10                                                   | 大行程指令位置       | largeDirePos        | Scalar      | DevDouble     | R       | 控制器反馈的大行程电机指令位置数值                                                                                                                                                                                                                                                                                        | 定时检测，每隔30ms检测一次         |                                                                                                                                                                                     |
| 11                                                   | 六自由度绝对编码器电机位置 | sixPos              | spectrum    | DevDouble[6]  | R       | 绝对式编码器采集卡反馈的六个电机位置数值                                                                                                                                                                                                                                                                                     | 定时检测，每隔30ms检测一次         |                                                                                                                                                                                     |
| 12                                                   | 六自由度指令位置      | sixDirePos          | spectrum    | DevDouble[6]  | R       | 控制器反馈的六自由度电机指令位置数值                                                                                                                                                                                                                                                                                       | 定时检测，每隔30ms检测一次         |                                                                                                                                                                                     |
| 13                                                   | 六自由度位姿        | sixFreedomPose      | spectrum    | DevDouble[6]  | R       | 六自由度位姿。
[0]-X;[1]-Y;[2]-Z;[3]-ThetaX;[4]-ThetaY;[5]-ThetaZ                                                                                                                                                                                                                                               | 定时检测，每隔30ms检测一次         |                                                                                                                                                                                     |
| 14                                                   | 六自由度制动器开关状态   | sixBrakeState       | Scalar      | DevBool       | R       | true-开，false-关                                                                                                                                                                                                                                                                                           | 开关状态变化时刷新               |                                                                                                                                                                                     |
| 15                                                   | 一维平台绝对编码器位置   | oneRangePos         | Scalar      | DevDouble     | R       | 绝对式编码器采集卡反馈的大行程电机位置数值                                                                                                                                                                                                                                                                                    | 定时检测，每隔30ms检测一次         |                                                                                                                                                                                     |
| 16                                                   | 一维平台指令位置      | oneDirePos          | Scalar      | DevDouble     | R       | 控制器反馈的大行程电机指令位置数值                                                                                                                                                                                                                                                                                        | 定时检测，每隔30ms检测一次         |                                                                                                                                                                                     |
| 17                                                   | 轴参数           | axisParameter       | Scalar      | DevString     | R       | 反馈当前服务使用的轴极其对应的运动参数/结构参数，
返回json格式字符串{
  "AxisX":{
  "StepAngle": "XXX",
  "GearRatio": "XXX",
  "Subdivision": "XXX"
  "StartSpeed": "XXX",
   "MaxSpeed": "XXX",
   "AccelerationTime": "XXX",
   "DecelerationTime": "XXX",
   "StopSpeed": "XXX"，
  "ChannelNumber": "XXX"

}，"AxisX":{
    ....
}
} | 参数发生改变时刷新               | {
  "X号轴":{
  "步距角": "XXX",
  "传动比": "XXX",
  "细分数": "XXX"
  "起始速度": "XXX",
  "最大速度": "XXX",
  "加速时间": "XXX",
  "减速时间": "XXX",
  "停止速度": "XXX"
  "分辨率"："XXX"
}，"X号轴"：{
   .....
}
} |
| 18                                                   | 光源亮度          | brightnessParameter | Scalar      | DevString     | R       | JSON对象格式字符串：
{
  "ChannelNumber1": "X",
  "ChannelNumber2": "X",,
}                                                                                                                                                                                                                                      | 参数被修改时刷新                | {
  "模拟量通道1": "电流值",
  "模拟量通道2": "电流值",
}                                                                                                                                           |
| 13                                                   | 六自由度轴限位及原点状态  | limOrgState         | spectrum    | DevShort[6]   | R       | 反馈当前服务使用的轴的限位及原点状态

short数组                                                                                                                                                                                                                                                                              | 定时检测，每隔1000ms检测一次       | 1：正限位
-1：负限位
0：原点
2：不在限位位置                                                                                                                                                          |
| 14                                                   | 六自由度状态        | sdofState           | spectrum    | DevBoolean[6] | R       | boolean数组                                                                                                                                                                                                                                                                                                | 定时检测，每隔1000ms检测一次       | true：忙碌；false：空闲                                                                                                                                                                    |
| 15                                                   | 一维平台限位及原点状态   | oneRangeLimOrgState | Scalar      | DevShort      | R       | short                                                                                                                                                                                                                                                                                                    | 定时检测，每隔1000ms检测一次       | 1：正限位
-1：负限位
0：原点
2：不在限位位置                                                                                                                                                          |
| 16                                                   | 一维平台状态        | oneRangeState       | Scalar      | DevBoolean    | R       | true：忙碌；false：空闲                                                                                                                                                                                                                                                                                         | 定时检测，每隔1000ms检测一次       |                                                                                                                                                                                     |
| 17                                                   | 大行程限位及原点状态    | LargeLimOrgState    | Scalar      | DevShort      | R       | short                                                                                                                                                                                                                                                                                                    | 定时检测，每隔1000ms检测一次       | 1：正限位
-1：负限位
0：原点
2：不在限位位置                                                                                                                                                          |
| 18                                                   | 大行程状态         | LargeRangeState     | Scalar      | DevBoolean    | R       |                                                                                                                                                                                                                                                                                                          | 定时检测，每隔1000ms检测一次       | true：忙碌；false：空闲                                                                                                                                                                    |
| 19                                                   | 任务返回值         | resultValue         | Scalar      | DevShort      | R       | 当前任务的返回值                                                                                                                                                                                                                                                                                                 | 0，1                     | 0：成功 1：失败                                                                                                                                                                           |

## Sheet: 03.Command

| 0                                                    | 1                 | 2                 | 3                 | 4                 | 5                                                                              | 6                                                              |
|------------------------------------------------------|-------------------|-------------------|-------------------|-------------------|--------------------------------------------------------------------------------|----------------------------------------------------------------|
| 服务名称：backlight_imaging_server/backlight（真空系统/背光成像表征） |                   |                   |                   |                   |                                                                                |                                                                |
| 序号                                                   | 接口名称              | 设计名称              | 输入数据类型            | 输出数据类型            | 接口说明                                                                           | 备注                                                             |
| 1                                                    | 预约锁定              | devLock           | DevVoid           | DevVoid           | 预约锁定，本接口由“软件集成开发平台组件”提供统一实现（C++）；
输入数据为JSON格式字符串，包括用户名、角色名、角色等级等信息；
预约锁定失败抛出异常 |                                                                |
| 2                                                    | 解除锁定              | devUnlock         | DevBoolean        | DevVoid           | 解除锁定，本接口由“软件集成开发平台组件”提供统一实现（C++）；
输入数据为：true为所有客户端解锁，false为当前客户端解锁；
解除锁定失败抛出异常 |                                                                |
| 3                                                    | 锁定确认              | devLockVerify     | DevVoid           | DevVoid           | 锁定确认，本接口由“软件集成开发平台组件”提供统一实现（C++）；
锁定确认失败抛出异常                                   |                                                                |
| 4                                                    | 锁定查询              | devLockQuery      | DevVoid           | DevString         | 锁定查询，本接口由“软件集成开发平台组件”提供统一实现（C++）；
返回当前预约锁定的所有客户端信息，JSON格式字符串；
锁定查询失败抛出异常       |                                                                |
| 5                                                    | 用户配置              | devUserConfig     | DevVoid           | DevVoid           | 预约锁定，本接口由“软件集成开发平台组件”提供统一实现（C++）；
输入数据为JSON格式字符串，包括用户名、角色名、角色等级等信息；
用户配置失败抛出异常 |                                                                |
| 6                                                    | 自检                | selfCheck         | DevVoid           | DevVoid           | 自检，设备根据自身情况处理，尽可能能反映设备状况；查询结果保存在Attribute的selfCheckState和selfCheckStatus中      |                                                                |
| 7                                                    | 初始化               | init              | DevVoid           | DevVoid           | 系统初始化。                                                                         |                                                                |
| 8                                                    | 大行程轴运动参数设置        | moveAxisSet       | DevVarDoubleArray | DevVoid           | 输入值：[0]-[4]分别设置电机的起始速度、最大速度、加速时间、减速时间、停止速度。                                    |                                                                |
| 9                                                    | 大行程轴结构参数设置        | structAxisSet     | DevVarDoubleArray | DevVoid           | 输入值：[0]:步角距，[1]:传动比 ，[2]:细分。                                                   |                                                                |
| 10                                                   | 大行程停止             | largeStop         | DevVoid           | DevVoid           | 大行程停止运动。                                                                       |                                                                |
| 11                                                   | 大行程复位             | largeReset        | DevVoid           | DevVoid           | 大行程故障复位。                                                                       |                                                                |
| 12                                                   | 大行程相对运动           | largeMoveRelative | DevDouble         | DevVoid           | 按给定位置相对运动。输入值：相对位置值。                                                           |                                                                |
| 13                                                   | 大行程绝对运动           | largeMoveAbsolute | DevDouble         | DevVoid           | 按给定位置绝对运动。输入值：绝对位置值。                                                           |                                                                |
| 14                                                   | 大行程读取绝对编码器位置值     | largeReadEncoder  | DevVoid           | DevDouble         | 绝对值编码器数值读入。返回值：编码器数值                                                           |                                                                |
| 15                                                   | 大行程自动位置控制         | largeMoveAuto     | DevDouble         | DevVoid           | 大行程自动运动到特定位置。                                                                  |                                                                |
| 16                                                   | 大行程原点状态读取         | largeReadOrg      | DevVoid           | DevBoolean        | 返回值：true：在原点。flase：不在原点                                                        |                                                                |
| 17                                                   | 大行程限位状态读取         | largeReadEL       | DevVoid           | DevShort          | 返回值：0，无；1：EL+；2：EL-                                                            |                                                                |
| 18                                                   | 六自由度轴参数设置         | sixAxisSet        | DevVarDoubleArray | DevVoid           | [0]-[4]分别设置电机的起始速度、最大速度、加速时间、减速时间、停止速度                                         |                                                                |
| 19                                                   | 六自由度轴结构参数设置       | structAxisSet     | DevVarDoubleArray | DevVoid           | 输入值：[0]:步角距，[1]:传动比 ，[2]:细分。                                                   |                                                                |
| 20                                                   | 六自由度停止            | sixStop           | DevVoid           | DevVoid           | 六自由度停止运动。                                                                      |                                                                |
| 21                                                   | 六自由度复位            | sixSeset          | DevVoid           | DevVoid           | 六自由度复位。                                                                        |                                                                |
| 22                                                   | 六自由度回零            | sixMoveZero       | DevVoid           | DevVoid           | 六自由度回零。                                                                        |                                                                |
| 23                                                   | 六自由度相对运动          | sixMoveRelative   | DevVarDoubleArray | DevVoid           | 按给定位置相对运动。                                                                     | 数组元素与轴对应关系为：[0]-X;[1]-Y;[2]-Z;[3]-ThetaX;[4]-ThetaY;[5]-ThetaZ |
| 24                                                   | 六自由度读取绝对编码器位置值    | sixReadEncoder    | DevVoid           | DevVarDoubleArray | 所有轴编码器数值读入。                                                                    |                                                                |
| 25                                                   | 六自由度原点状态读读取       | sixReadOrg        | DevVoid           | DevVarDoubleArray | 返回值： 0-不在原点。1-在原点                                                              |                                                                |
| 26                                                   | 六自由度限位状态读取        | sixReadEL         | DevVoid           | DevVarDoubleArray | 返回值：0-无；1-EL+；2-EL-                                                            |                                                                |
| 27                                                   | 六自由度制动器开关         | sixOpenBrake      | DevBoolean        | DevVoid           | true-开，false-关                                                                 |                                                                |
| 28                                                   | 一维平台轴运动参数设置       | oneMoveAxisSet    | DevVarDoubleArray | DevVoid           | 输入值：[0]-[4]分别设置电机的起始速度、最大速度、加速时间、减速时间、停止速度。                                    |                                                                |
| 29                                                   | 一维平台轴结构参数设置       | oneStructAxisSet  | DevVarDoubleArray | DevVoid           | 输入值：[0]:步角距，[1]:传动比 ，[2]:细分。                                                   |                                                                |
| 30                                                   | 一维平台停止            | oneStop           | DevVoid           | DevVoid           | 一维平台停止运动。                                                                      |                                                                |
| 31                                                   | 一维平台复位            | oneReset          | DevVoid           | DevVoid           | 一维平台故障复位。                                                                      |                                                                |
| 32                                                   | 一维平台相对运动          | oneMoveRelative   | DevDouble         | DevVoid           | 按给定位置相对运动。输入值：相对位置值。                                                           |                                                                |
| 33                                                   | 一维平台绝对运动          | oneMoveAbsolute   | DevDouble         | DevVoid           | 按给定位置绝对运动。输入值：绝对位置值。                                                           |                                                                |
| 34                                                   | 一维平台读取绝对编码器位置值    | oneReadEncoder    | DevVoid           | DevDouble         | 绝对值编码器数值读入。返回值：编码器数值                                                           |                                                                |
| 35                                                   | 一维平台自动位置控制        | oneMoveAuto       | DevDouble         | DevVoid           | 一维平台自动运动到特定位置。                                                                 |                                                                |
| 36                                                   | 一维平台原点状态读取        | oneReadOrg        | DevVoid           | DevBoolean        | 返回值：true：在原点。flase：不在原点                                                        |                                                                |
| 37                                                   | 一维平台限位状态读取        | oneReadEL         | DevVoid           | DevShort          | 返回值：0，无；1：EL+；2：EL-                                                            |                                                                |
| 38                                                   | 光源亮度设置            | setBrightness     | DevVarDoubleArray | DevVoid           | 输入值：[0]:模拟量输出端口号，[1]：电流大小（0-1200ma,对应模拟量电压0-5v）。                               |                                                                |
| 39                                                   | 光源亮度读取            | readBrightness    | DevShort          | DevDouble         | 输入值：[0]:模拟量输出端口号，返回值：电流大小。                                                     |                                                                |
| 40                                                   | 顶光源开关             | topLightSwitch    | DevBoolean        | DevVoid           | 打开/关闭顶光源。                                                                      |                                                                |
| 41                                                   | 背光光源开关            | backLightSwitch   | DevBoolean        | DevVoid           | 打开/关闭背光源。                                                                      |                                                                |
| 42                                                   | CCD开关             | ccdSwitch         | DevVoid           | DevVoid           | 打开/关闭CCD。                                                                      |                                                                |
| 43                                                   | 参数读取              | readtAxis         | DevVoid           | DevString         | 读取轴的运动参数、结构参数、对应编码器分辨率、模拟量输出值，返回json格式字符串                                      |                                                                |
| 44                                                   | 参数导出              | exportAxis        | DevVoid           | DevVoid           | 导出对应轴的运动参数、结构参数、对应编码器分辨率、模拟量输出值为本地文件                                           |                                                                |
|                                                      | 备注：接口调用出现问题时，抛出异常 |                   |                   |                   |                                                                                |                                                                |

## Sheet: 04.状态机

| 0                                                    | 1              | 2                 | 3              | 4          | 5        | 6         |
|------------------------------------------------------|----------------|-------------------|----------------|------------|----------|-----------|
| 服务名称：backlight_imaging_server/backlight（真空系统/背光成像表征） |                |                   |                |            |          |           |
| 序号                                                   | 接口名称           | 设计名称              | 设备不在线(UNKNOWN) | 在线不工作(OFF) | 在线工作(ON) | 故障(FAULT) |
| 1                                                    | 预约锁定           | devLock           | √              | √          |          | √         |
| 2                                                    | 解除锁定           | devUnlock         | √              | √          |          | √         |
| 3                                                    | 锁定确认           | devLockVerify     | √              | √          | √        | √         |
| 4                                                    | 锁定查询           | devLockQuery      | √              | √          | √        | √         |
| 5                                                    | 用户配置           | devUserConfig     | √              | √          | √        | √         |
| 6                                                    | 自检             | selfCheck         | √              | √          |          | √         |
| 7                                                    | 初始化            | init              | √              | √          |          | √         |
| 8                                                    | 大行程轴运动参数设置     | moveAxisSet       |                | √          | √        | √         |
| 9                                                    | 大行程轴结构参数设置     | structAxisSet     |                | √          | √        | √         |
| 10                                                   | 大行程停止          | largeStop         |                |            | √        | √         |
| 11                                                   | 大行程复位          | largeReset        |                |            | √        | √         |
| 12                                                   | 大行程相对运动        | largeMoveRelative |                |            | √        | √         |
| 13                                                   | 大行程绝对运动        | largeMoveAbsolute |                |            | √        | √         |
| 14                                                   | 大行程读取绝对编码器位置值  | largeReadEncoder  |                | √          | √        | √         |
| 15                                                   | 大行程自动位置控制      | largeMoveAuto     |                |            | √        |           |
| 16                                                   | 大行程原点状态读取      | largeReadOrg      |                | √          | √        | √         |
| 17                                                   | 大行程限位状态读取      | largeReadEL       |                | √          | √        | √         |
| 18                                                   | 六自由度轴参数设置      | sixAxisSet        |                | √          | √        | √         |
| 19                                                   | 六自由度轴结构参数设置    | structAxisSet     |                | √          | √        | √         |
| 20                                                   | 六自由度停止         | sixStop           |                | √          | √        | √         |
| 21                                                   | 六自由度复位         | sixSeset          |                | √          | √        | √         |
| 22                                                   | 六自由度回零         | sixMoveZero       |                | √          | √        | √         |
| 23                                                   | 六自由度相对运动       | sixMoveRelative   |                |            | √        |           |
| 24                                                   | 六自由度绝对运动       | sixMoveAbsolute   |                |            | √        |           |
| 25                                                   | 位姿运动           | movePose          |                |            | √        |           |
| 26                                                   | 六自由度读取绝对编码器位置值 | sixReadEncoder    |                | √          | √        | √         |
| 27                                                   | 六自由度原点状态读读取    | sixReadOrg        |                | √          | √        | √         |
| 28                                                   | 六自由度限位状态读取     | sixReadEL         |                | √          | √        | √         |
| 29                                                   | 六自由度制动器开关      | sixOpenBrake      |                | √          | √        | √         |
| 30                                                   | 一维平台轴运动参数设置    | oneMoveAxisSet    |                | √          | √        | √         |
| 31                                                   | 一维平台轴结构参数设置    | oneStructAxisSet  |                | √          | √        | √         |
| 32                                                   | 一维平台停止         | oneStop           |                | √          | √        | √         |
| 33                                                   | 一维平台复位         | oneReset          |                | √          | √        | √         |
| 34                                                   | 一维平台相对运动       | oneMoveRelative   |                |            | √        |           |
| 35                                                   | 一维平台绝对运动       | oneMoveAbsolute   |                |            | √        |           |
| 36                                                   | 一维平台读取绝对编码器位置值 | oneReadEncoder    |                | √          | √        | √         |
| 37                                                   | 一维平台自动位置控制     | oneMoveAuto       |                |            | √        |           |
| 38                                                   | 一维平台原点状态读取     | oneReadOrg        |                | √          | √        | √         |
| 39                                                   | 一维平台限位状态读取     | oneReadEL         |                | √          | √        | √         |
| 40                                                   | 光源亮度设置         | setBrightness     |                | √          | √        |           |
| 41                                                   | 光源亮度读取         | readBrightness    |                | √          | √        |           |
| 42                                                   | 顶光源开关          | topLightSwitch    |                |            | √        |           |
| 43                                                   | 背光光源开关         | backLightSwitch   |                |            | √        |           |
| 44                                                   | CCD开关          | ccdSwitch         |                | √          | √        | √         |
| 45                                                   | 日志导出           | exportLogs        |                | √          | √        | √         |
| 46                                                   | 参数读取           | readtAxis         |                | √          | √        | √         |
| 47                                                   | 参数导出           | exportAxis        |                | √          | √        | √         |
| 48                                                   | 模拟运行开关         | simSwitch         |                | √          | √        | √         |

