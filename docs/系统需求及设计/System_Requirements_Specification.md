# 双锥射击控制系统需求规格说明书 (SRS)

**版本**: 1.0  
**日期**: 2025-11-20  
**状态**: 已更新 (适配18轴架构)

## 1. 引言

### 1.1 目的
本文档旨在定义双锥射击控制系统的功能和非功能需求，作为系统设计、开发和测试的依据。系统基于 Tango Controls 框架开发，用于控制多轴运动机构、真空系统及执行安全联锁逻辑。

### 1.2 范围
本系统涵盖上位机控制软件、Tango 设备服务器以及底层硬件通信接口。系统控制对象包括18个步进电机、真空泵/阀以及相关的传感器反馈。

## 2. 硬件对象描述

系统共控制 **18个步进电机**，具体分配如下：

| 子系统 | 电机名称/功能 | 型号 | 数量 | 备注 |
| :--- | :--- | :--- | :--- | :--- |
| **靶定位系统** | 六自由度关节 | 42型 | 6 | 独立驱动6自由度机构的每个关节 |
| | 大行程机构 (Large Stroke) | 86型 | 1 | 靶件的长距离传输 |
| **辅助支撑系统** | 红外均化 | 57型 | 2 | |
| | 反射成像 | 57型 | 2 | |
| | 靶支撑 | 57型 | 1 | |
| **背光表征系统** | 上下反射成像 (组1 & 组2) | 42型 | 4 | |
| | 上下反射成像 (组3) | 57型 | 2 | |

**控制硬件**:
*   **运动控制器**: 雷赛 (Leisai) 网络运动控制器 (共3台)。
*   **反馈系统**: 绝对值编码器 -> 明快 ALE10 采集器 -> Tango 系统。

## 3. 功能需求

### 3.1 运动控制功能

#### 3.1.1 大行程控制 (Large Stroke)
*   **REQ-MC-01**: 系统应能控制大行程电机进行绝对定位和相对运动。
*   **REQ-MC-02**: 系统应实时显示大行程电机的当前位置 (mm) 和运动状态。
*   **REQ-MC-03**: 提供停止、复位和回零功能。

#### 3.1.2 六自由度控制 (Six DOF)
*   **REQ-MC-04**: 系统应能独立控制6个关节电机。
*   **REQ-MC-05**: 系统应支持六自由度位姿 (X, Y, Z, Rx, Ry, Rz) 的显示和输入 (注: 当前底层实现为关节控制，上层预留位姿转换接口)。
*   **REQ-MC-06**: 提供一键复位和停止功能。

#### 3.1.3 辅助支撑控制 (Auxiliary Support)
*   **REQ-MC-07**: 系统应将5个电机分组显示：红外均化(2)、反射成像(2)、靶支撑(1)。
*   **REQ-MC-08**: 支持单轴独立运动控制。

#### 3.1.4 背光表征控制 (Backlight System)
*   **REQ-MC-09**: 系统应控制6个背光电机，支持位置设定和状态监控。

### 3.2 真空控制功能
*   **REQ-VAC-01**: 系统应能控制真空泵的启停。
*   **REQ-VAC-02**: 系统应能控制闸板阀的开关。
*   **REQ-VAC-03**: 系统应实时监测并显示真空腔体压力。

### 3.3 安全与联锁功能
*   **REQ-SAF-01 (急停)**: 界面应提供全局“紧急停止”按钮，按下后立即停止所有18个电机和真空动作。
*   **REQ-SAF-02 (软联锁)**: 系统应具备软件联锁逻辑（例如：大行程伸出时，限制辅助支撑的运动范围）。
*   **REQ-SAF-03 (状态监测)**: 系统应周期性检查设备连接状态，断连时报警。

### 3.4 用户界面 (GUI)
*   **REQ-UI-01**: 界面采用侧边栏导航结构，包含“靶定位”、“背光表征”、“辅助支撑/y射线”三个主要页面。
*   **REQ-UI-02**: 界面右侧应常驻显示关键状态概览和日志信息。
*   **REQ-UI-03**: 支持“模拟模式”启动，在无硬件环境下演示所有功能。

## 4. 非功能需求

*   **NREQ-01 (实时性)**: 状态刷新频率不低于 1Hz。
*   **NREQ-02 (可扩展性)**: 设备服务层应支持通过配置增加轴数，无需修改代码（已通过 MultiAxisDevice 实现）。
*   **NREQ-03 (兼容性)**: 软件应在 Windows 10/11 环境下运行，支持 MinGW 编译。

## 5. 接口需求

*   **Tango 接口**: 所有硬件设备必须封装为 Tango Device Server。
*   **硬件 SDK**: 通过雷赛 SDK (LTSMC) 与控制器通信。
